import { Injectable } from '@angular/core';
import { webSocket } from 'rxjs/webSocket';
import { Subject } from 'rxjs';
import { filter, pluck, take, tap, map } from 'rxjs/operators';
import * as i0 from "@angular/core";
export class NgxRoslibService {
    constructor() {
        this.isConnected = false;
    }
    set statusLevel(level) {
        if (this.ros)
            this.ros.statusLevel = level;
    }
    connect(url, transportLibrary = 'websocket', transportOptions) {
        const ros = (this.ros = new Rosbridge());
        this.connection$ = ros.connect(url, transportLibrary, transportOptions);
        this.onOpen = ros.onOpen;
        this.onClose = ros.onClose;
        this.onError = ros.onError;
        return ros;
    }
    ngOnDestroy() {
        var _a;
        (_a = this.connection$) === null || _a === void 0 ? void 0 : _a.complete();
    }
}
NgxRoslibService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.1", ngImport: i0, type: NgxRoslibService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
NgxRoslibService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.1", ngImport: i0, type: NgxRoslibService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.1", ngImport: i0, type: NgxRoslibService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return []; } });
export class Rosbridge {
    constructor(url, transportLibrary, transportOptions) {
        this.isConnected = false;
        this.transportLibrary = 'websocket';
        this.connectionOpened$ = new Subject();
        this.onOpen = this.connectionOpened$.asObservable();
        this.connectionClosed$ = new Subject();
        this.onClose = this.connectionClosed$.asObservable();
        this.connectionError$ = new Subject();
        this.onError = this.connectionError$.asObservable();
        if (url) {
            this.connection$ = this.connect(url, transportLibrary !== null && transportLibrary !== void 0 ? transportLibrary : 'websocket', transportOptions);
        }
    }
    set statusLevel(level) {
        const setStateLevelRequest = new SetStatusLevel(level);
        this.sendRequest(setStateLevelRequest);
    }
    connect(url, transportLibrary = 'websocket', transportOptions) {
        var _a;
        this.transportOptions = transportOptions;
        this.transportLibrary = transportLibrary;
        let wsUrl;
        if (transportLibrary === 'websocket') {
            wsUrl = url.replace(/(http)(s)?:\/\//, 'ws$2://');
            if (!this.connection$ || this.connection$.closed) {
                this.connection$ = webSocket({
                    url: wsUrl,
                    binaryType: 'arraybuffer',
                    openObserver: {
                        next: (value) => {
                            this.isConnected = true;
                            this.connectionOpened$.next(value);
                        },
                    },
                    closeObserver: {
                        next: (closeEvent) => {
                            this.isConnected = false;
                            this.connectionClosed$.next(closeEvent);
                        },
                    },
                    closingObserver: {
                        next: () => { },
                    },
                });
            }
        }
        else if (transportLibrary === 'workerSocket') {
            // TODO: add websocket in web worker implementation for the connect method
            //
        }
        (_a = this.connection$) === null || _a === void 0 ? void 0 : _a.subscribe(() => { }, () => { }); // Needed to open the websocket
        return this.connection$;
    }
    authenticate(mac, client, dest, rand, t, level, end) {
        this.sendRequest({
            op: 'auth',
            mac: mac,
            client: client,
            dest: dest,
            rand: rand,
            t: t,
            level: level,
            end: end,
        });
    }
    sendRequest(message) {
        var _a, _b;
        if (!this.isConnected) {
            console.log('Trying to send request, but not connected. Waiting...');
            (_a = this.onOpen) === null || _a === void 0 ? void 0 : _a.pipe(take(1)).subscribe(() => { var _a; return (_a = this.connection$) === null || _a === void 0 ? void 0 : _a.next(message); });
        }
        else {
            (_b = this.connection$) === null || _b === void 0 ? void 0 : _b.next(message);
        }
    }
    getTopics(callback, failedCallback) {
        const topicsService = new RosService({
            ros: this,
            name: '/rosapi/topics',
            serviceType: 'rosapi/Topics',
        });
        if (failedCallback) {
            topicsService.call({}, (msg) => {
                callback(msg.topics);
            }, failedCallback);
        }
        else {
            topicsService.call({}, (msg) => {
                callback(msg.topics);
            });
        }
    }
    getNodes(callback, failedCallback) {
        const topicsService = new RosService({
            ros: this,
            name: '/rosapi/nodes',
            serviceType: 'rosapi/Nodes',
        });
        if (failedCallback) {
            topicsService.call({}, (msg) => {
                callback(msg.nodes);
            }, failedCallback);
        }
        else {
            topicsService.call({}, (msg) => {
                callback(msg.nodes);
            });
        }
    }
}
let idCounter = 0;
class RosbridgeProtocol {
}
class SetStatusLevel extends RosbridgeProtocol {
    constructor(level, id) {
        super();
        this.op = 'set_level';
        this.level = level;
        this.id = id;
    }
}
class StatusMessage extends RosbridgeProtocol {
    constructor(level, msg, id) {
        super();
        this.op = 'status';
        this.level = level;
        this.id = id;
        this.msg = msg;
    }
}
class Authenticate extends RosbridgeProtocol {
    constructor(mac, client, dest, rand, t, level, end) {
        super();
        this.op = 'auth';
        this.mac = mac;
        this.client = client;
        this.dest = dest;
        this.rand = rand;
        this.t = t;
        this.level = level;
        this.end = end;
    }
}
class Advertise extends RosbridgeProtocol {
    constructor(topic, type, id, latch, queue_size) {
        super();
        this.op = 'advertise';
        this.topic = topic;
        this.id = `advertise:${this.topic}:${++idCounter}`;
        this.type = type;
        this.latch = latch !== null && latch !== void 0 ? latch : false;
        if (queue_size) {
            this.queue_size = Math.max(0, queue_size);
        }
        else {
            this.queue_size = 100;
        }
    }
}
class Unadvertise extends RosbridgeProtocol {
    constructor(topic, id) {
        super();
        this.op = 'unadvertise';
        this.id = id;
        this.topic = topic;
    }
}
class Publish extends RosbridgeProtocol {
    constructor(topic, msg, id, latch, queue_size) {
        super();
        this.op = 'publish';
        this.topic = topic;
        this.id = `publish:${this.topic}:${++idCounter}`;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        this.msg = msg;
        this.latch = latch !== null && latch !== void 0 ? latch : false;
        if (queue_size) {
            this.queue_size = Math.max(0, queue_size);
        }
        else {
            this.queue_size = 100;
        }
    }
}
class Subscribe extends RosbridgeProtocol {
    constructor(topic, type, throttle_rate, queue_length, fragment_size, compression, id) {
        super();
        this.op = 'subscribe';
        this.topic = topic;
        this.id = `subscribe:${this.topic}:${++idCounter}`;
        this.type = type;
        this.throttle_rate = throttle_rate !== null && throttle_rate !== void 0 ? throttle_rate : 0;
        this.queue_length = queue_length !== null && queue_length !== void 0 ? queue_length : 0;
        this.fragment_size = fragment_size;
        this.compression = compression !== null && compression !== void 0 ? compression : 'none';
    }
}
class ServiceCall extends RosbridgeProtocol {
    constructor(service, args, id, fragment_size, compression) {
        super();
        this.args = {};
        this.op = 'call_service';
        this.service = service;
        this.id = id !== null && id !== void 0 ? id : `call_service:${this.service}:${++idCounter}`;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        this.args = args !== null && args !== void 0 ? args : {};
        this.fragment_size = fragment_size;
        this.compression = compression;
    }
}
class AdvertiseService extends RosbridgeProtocol {
    constructor(type, service) {
        super();
        this.op = 'advertise_service';
        this.type = type;
        this.service = service;
    }
}
class UnadvertiseService extends RosbridgeProtocol {
    constructor(service) {
        super();
        this.op = 'unadvertise_service';
        this.service = service;
    }
}
class ServiceRequest extends RosbridgeProtocol {
}
class ServiceResponse extends RosbridgeProtocol {
    constructor(service, result, values, id) {
        super();
        this.op = 'service_response';
        this.id = id;
        this.service = service;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        this.values = values !== null && values !== void 0 ? values : {};
        this.result = result;
    }
}
class Unsubscribe extends RosbridgeProtocol {
    constructor(topic, id) {
        super();
        this.op = 'unsubscribe';
        this.topic = topic;
        this.id = id;
    }
}
/**
 * RosTopic class used to instantiate a topic, subscribe to its event and advertise future events regarding the topic
 */
export class RosTopic {
    constructor({ ros, name, messageType, compression = 'none', throttleRate = 0, latch = false, queueSize = 100, queueLength = 0, reconnectOnClose = true, }) {
        this.ros = ros;
        this.name = name;
        this.messageType = messageType;
        this.compression = compression;
        this.throttleRate = throttleRate;
        this.latch = latch;
        this.queueSize = queueSize;
        this.queueLength = queueLength;
        this.reconnectOnClose = reconnectOnClose;
        this.throttleRate = Math.max(this.throttleRate, 0);
    }
    subscribe(callback) {
        var _a, _b;
        const subRequest = new Subscribe(this.name, this.messageType);
        this.observable$ = (_a = this.ros.connection$) === null || _a === void 0 ? void 0 : _a.pipe(filter((data) => (data === null || data === void 0 ? void 0 : data.topic) === this.name && (data === null || data === void 0 ? void 0 : data.op) === 'publish' // eslint-disable-line @typescript-eslint/no-unsafe-member-access
        ), pluck('msg'));
        this.sub = (_b = this.observable$) === null || _b === void 0 ? void 0 : _b.subscribe((message) => callback(message));
        this.id = subRequest.id;
        this.ros.sendRequest(subRequest);
    }
    unsubscribe() {
        var _a;
        const unsubRequest = new Unsubscribe(this.name, this.id);
        this.ros.sendRequest(unsubRequest);
        (_a = this.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();
    }
    advertise() {
        const advertiseRequest = new Advertise(this.name, this.messageType, this.id, this.latch, this.queueSize);
        this.id = advertiseRequest.id;
        this.ros.sendRequest(advertiseRequest);
    }
    publish(msg) {
        const publishRequest = new Publish(this.name, msg, this.id, this.latch, this.queueSize);
        this.ros.sendRequest(publishRequest);
    }
    unadvertise() {
        const unadvertiseRequest = new Unadvertise(this.name, this.id);
        this.ros.sendRequest(unadvertiseRequest);
    }
}
export class RosService {
    constructor({ ros, name, serviceType }) {
        this.isAdvertised = false;
        this.ros = ros;
        this.name = name;
        this.serviceType = serviceType;
    }
    advertise(callback) {
        var _a;
        const serviceAdvertiseRequest = new AdvertiseService(this.serviceType, this.name);
        (_a = this.ros.connection$) === null || _a === void 0 ? void 0 : _a.pipe(filter((data) => (data === null || data === void 0 ? void 0 : data.service) === this.name && // eslint-disable-line @typescript-eslint/no-unsafe-member-access
            (data === null || data === void 0 ? void 0 : data.op) === 'call_service' // eslint-disable-line @typescript-eslint/no-unsafe-member-access
        ), 
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        map(({ args, id }) => ({ args, id }))).subscribe((req) => {
            var _a;
            const res = callback(req.args);
            const serviceResponse = new ServiceResponse(this.name, true, res, (_a = req.id) !== null && _a !== void 0 ? _a : '');
            this.ros.sendRequest(serviceResponse);
        });
        this.ros.sendRequest(serviceAdvertiseRequest);
        this.isAdvertised = true;
    }
    call(req, callback, failedCallback) {
        var _a;
        const serviceCallRequest = new ServiceCall(this.name, req);
        (_a = this.ros.connection$) === null || _a === void 0 ? void 0 : _a.pipe(filter((data) => (data === null || data === void 0 ? void 0 : data.service) === this.name && // eslint-disable-line @typescript-eslint/no-unsafe-member-access
            (data === null || data === void 0 ? void 0 : data.id) === serviceCallRequest.id && // eslint-disable-line @typescript-eslint/no-unsafe-member-access
            (data === null || data === void 0 ? void 0 : data.op) === 'service_response' // eslint-disable-line @typescript-eslint/no-unsafe-member-access
        ), tap((msg) => {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
            if ((msg === null || msg === void 0 ? void 0 : msg.result) !== undefined && (msg === null || msg === void 0 ? void 0 : msg.result) === false)
                if (failedCallback) {
                    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
                    failedCallback(msg.values);
                }
        }), 
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        filter((data) => (data === null || data === void 0 ? void 0 : data.result) !== false), pluck('values'), take(1)).subscribe((message) => callback(message));
        this.ros.sendRequest(serviceCallRequest);
    }
    unadvertise() {
        if (!this.isAdvertised)
            return;
        const serviceUnadvertiseRequest = new UnadvertiseService(this.name);
        this.ros.sendRequest(serviceUnadvertiseRequest);
    }
}
export class RosParam {
    constructor({ ros, name }) {
        this.ros = ros;
        this.name = name;
    }
    get(callback) {
        const paramService = new RosService({
            ros: this.ros,
            name: '/rosapi/get_param',
            serviceType: 'rosapi/GetParam',
        });
        paramService.call({ name: this.name }, (res) => {
            // @ts-ignore
            callback(JSON.parse(res.value));
        });
    }
    set(newValue, callback) {
        const paramService = new RosService({
            ros: this.ros,
            name: '/rosapi/set_param',
            serviceType: 'rosapi/SetParam',
        });
        paramService.call({ name: this.name, value: JSON.stringify(newValue) }, () => {
            callback();
        });
    }
    delete(callback) {
        const paramService = new RosService({
            ros: this.ros,
            name: '/rosapi/delete_param',
            serviceType: 'rosapi/DeleteParam',
        });
        paramService.call({ name: this.name }, () => {
            callback();
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXJvc2xpYi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXJvc2xpYi9zcmMvbGliL25neC1yb3NsaWIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ3RELE9BQU8sRUFBRSxTQUFTLEVBQW9CLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0QsT0FBTyxFQUFjLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDekQsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7QUFLL0QsTUFBTSxPQUFPLGdCQUFnQjtJQVF6QjtRQUhBLGdCQUFXLEdBQUcsS0FBSyxDQUFDO0lBR0wsQ0FBQztJQUVoQixJQUFJLFdBQVcsQ0FBQyxLQUF5QjtRQUNyQyxJQUFJLElBQUksQ0FBQyxHQUFHO1lBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQy9DLENBQUM7SUFFRCxPQUFPLENBQ0gsR0FBVyxFQUNYLG1CQUEyQyxXQUFXLEVBQ3RELGdCQUFtQztRQUVuQyxNQUFNLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7UUFDekIsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1FBQzNCLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUMzQixPQUFPLEdB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Q0FBQztJQUVELE1BQU0sQ0FBQyxRQUFvQjtRQUN2QixNQUFNLFlBQVksR0FBRyxJQUFJLFVBQVUsQ0FBdUI7WUFDdEQsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO1lBQ2IsSUFBSSxFQUFFLHNCQUFzQjtZQUM1QixXQUFXLEVBQUUsb0JBQW9CO1NBQ3BDLENBQUMsQ0FBQztRQUVILFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsRUFBRTtZQUN4QyxRQUFRLEVBQUUsQ0FBQztRQUNmLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IHdlYlNvY2tldCwgV2ViU29ja2V0U3ViamVjdCB9IGZyb20gJ3J4anMvd2ViU29ja2V0JztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGZpbHRlciwgcGx1Y2ssIHRha2UsIHRhcCwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgTmd4Um9zbGliU2VydmljZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgICBjb25uZWN0aW9uJDogV2ViU29ja2V0U3ViamVjdDxhbnk+IHwgdW5kZWZpbmVkO1xyXG4gICAgb25PcGVuOiBPYnNlcnZhYmxlPGFueT4gfCB1bmRlZmluZWQ7XHJcbiAgICBvbkNsb3NlOiBPYnNlcnZhYmxlPENsb3NlRXZlbnQ+IHwgdW5kZWZpbmVkO1xyXG4gICAgb25FcnJvcjogT2JzZXJ2YWJsZTxhbnk+IHwgdW5kZWZpbmVkO1xyXG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcm9zOiBSb3NicmlkZ2UgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHNldCBzdGF0dXNMZXZlbChsZXZlbDogU3RhdHVzTWVzc2FnZUxldmVsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9zKSB0aGlzLnJvcy5zdGF0dXNMZXZlbCA9IGxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3QoXHJcbiAgICAgICAgdXJsOiBzdHJpbmcsXHJcbiAgICAgICAgdHJhbnNwb3J0TGlicmFyeTogUm9zTGliVHJhbnNwb3J0TGlicmFyeSA9ICd3ZWJzb2NrZXQnLFxyXG4gICAgICAgIHRyYW5zcG9ydE9wdGlvbnM/OiBSVENDb25maWd1cmF0aW9uXHJcbiAgICApOiBSb3NicmlkZ2Uge1xyXG4gICAgICAgIGNvbnN0IHJvcyA9ICh0aGlzLnJvcyA9IG5ldyBSb3NicmlkZ2UoKSk7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uJCA9IHJvcy5jb25uZWN0KHVybCwgdHJhbnNwb3J0TGlicmFyeSwgdHJhbnNwb3J0T3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5vbk9wZW4gPSByb3Mub25PcGVuO1xyXG4gICAgICAgIHRoaXMub25DbG9zZSA9IHJvcy5vbkNsb3NlO1xyXG4gICAgICAgIHRoaXMub25FcnJvciA9IHJvcy5vbkVycm9yO1xyXG4gICAgICAgIHJldHVybiByb3M7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uJD8uY29tcGxldGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIEdldFRvcGljc1NlcnZpY2VSZXNwb25zZSB7XHJcbiAgICB0b3BpY3M6IHN0cmluZ1tdO1xyXG4gICAgdHlwZXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgR2V0Tm9kZXNTZXJ2aWNlUmVzcG9uc2Uge1xyXG4gICAgbm9kZXM6IHN0cmluZ1tdO1xyXG4gICAgdHlwZXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUm9zYnJpZGdlIHtcclxuICAgIGlzQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICB0cmFuc3BvcnRMaWJyYXJ5OiBSb3NMaWJUcmFuc3BvcnRMaWJyYXJ5ID0gJ3dlYnNvY2tldCc7XHJcbiAgICB0cmFuc3BvcnRPcHRpb25zOiBSVENDb25maWd1cmF0aW9uIHwgdW5kZWZpbmVkO1xyXG4gICAgY29ubmVjdGlvbiQ6IFdlYlNvY2tldFN1YmplY3Q8YW55PiB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgY29ubmVjdGlvbk9wZW5lZCQgPSBuZXcgU3ViamVjdDxFdmVudD4oKTtcclxuICAgIG9uT3BlbiA9IHRoaXMuY29ubmVjdGlvbk9wZW5lZCQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICBwcml2YXRlIGNvbm5lY3Rpb25DbG9zZWQkID0gbmV3IFN1YmplY3Q8Q2xvc2VFdmVudD4oKTtcclxuICAgIG9uQ2xvc2UgPSB0aGlzLmNvbm5lY3Rpb25DbG9zZWQkLmFzT2JzZXJ2YWJsZSgpO1xyXG4gICAgcHJpdmF0ZSBjb25uZWN0aW9uRXJyb3IkID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgb25FcnJvcjogT2JzZXJ2YWJsZTxhbnk+IHwgdW5kZWZpbmVkID0gdGhpcy5jb25uZWN0aW9uRXJyb3IkLmFzT2JzZXJ2YWJsZSgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHVybD86IHN0cmluZyxcclxuICAgICAgICB0cmFuc3BvcnRMaWJyYXJ5PzogUm9zTGliVHJhbnNwb3J0TGlicmFyeSxcclxuICAgICAgICB0cmFuc3BvcnRPcHRpb25zPzogUlRDQ29uZmlndXJhdGlvblxyXG4gICAgKSB7XHJcbiAgICAgICAgaWYgKHVybCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24kID0gdGhpcy5jb25uZWN0KFxyXG4gICAgICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0TGlicmFyeSA/PyAnd2Vic29ja2V0JyxcclxuICAgICAgICAgICAgICAgIHRyYW5zcG9ydE9wdGlvbnNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHN0YXR1c0xldmVsKGxldmVsOiBTdGF0dXNNZXNzYWdlTGV2ZWwpIHtcclxuICAgICAgICBjb25zdCBzZXRTdGF0ZUxldmVsUmVxdWVzdCA9IG5ldyBTZXRTdGF0dXNMZXZlbChsZXZlbCk7XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChzZXRTdGF0ZUxldmVsUmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdChcclxuICAgICAgICB1cmw6IHN0cmluZyxcclxuICAgICAgICB0cmFuc3BvcnRMaWJyYXJ5OiBSb3NMaWJUcmFuc3BvcnRMaWJyYXJ5ID0gJ3dlYnNvY2tldCcsXHJcbiAgICAgICAgdHJhbnNwb3J0T3B0aW9ucz86IFJUQ0NvbmZpZ3VyYXRpb25cclxuICAgICk6IFdlYlNvY2tldFN1YmplY3Q8YW55PiB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgdGhpcy50cmFuc3BvcnRPcHRpb25zID0gdHJhbnNwb3J0T3B0aW9ucztcclxuICAgICAgICB0aGlzLnRyYW5zcG9ydExpYnJhcnkgPSB0cmFuc3BvcnRMaWJyYXJ5O1xyXG4gICAgICAgIGxldCB3c1VybDogc3RyaW5nO1xyXG4gICAgICAgIGlmICh0cmFuc3BvcnRMaWJyYXJ5ID09PSAnd2Vic29ja2V0Jykge1xyXG4gICAgICAgICAgICB3c1VybCA9IHVybC5yZXBsYWNlKC8oaHR0cCkocyk/OlxcL1xcLy8sICd3cyQyOi8vJyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb25uZWN0aW9uJCB8fCB0aGlzLmNvbm5lY3Rpb24kLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uJCA9IHdlYlNvY2tldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB3c1VybCxcclxuICAgICAgICAgICAgICAgICAgICBiaW5hcnlUeXBlOiAnYXJyYXlidWZmZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZW5PYnNlcnZlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uT3BlbmVkJC5uZXh0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlT2JzZXJ2ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogKGNsb3NlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkNsb3NlZCQubmV4dChjbG9zZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NpbmdPYnNlcnZlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zcG9ydExpYnJhcnkgPT09ICd3b3JrZXJTb2NrZXQnKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCB3ZWJzb2NrZXQgaW4gd2ViIHdvcmtlciBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGNvbm5lY3QgbWV0aG9kXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiQ/LnN1YnNjcmliZShcclxuICAgICAgICAgICAgKCkgPT4ge30sXHJcbiAgICAgICAgICAgICgpID0+IHt9XHJcbiAgICAgICAgKTsgLy8gTmVlZGVkIHRvIG9wZW4gdGhlIHdlYnNvY2tldFxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24kO1xyXG4gICAgfVxyXG5cclxuICAgIGF1dGhlbnRpY2F0ZShcclxuICAgICAgICBtYWM6IHN0cmluZyxcclxuICAgICAgICBjbGllbnQ6IHN0cmluZyxcclxuICAgICAgICBkZXN0OiBzdHJpbmcsXHJcbiAgICAgICAgcmFuZDogc3RyaW5nLFxyXG4gICAgICAgIHQ6IG51bWJlcixcclxuICAgICAgICBsZXZlbDogc3RyaW5nLFxyXG4gICAgICAgIGVuZDogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KHtcclxuICAgICAgICAgICAgb3A6ICdhdXRoJyxcclxuICAgICAgICAgICAgbWFjOiBtYWMsXHJcbiAgICAgICAgICAgIGNsaWVudDogY2xpZW50LFxyXG4gICAgICAgICAgICBkZXN0OiBkZXN0LFxyXG4gICAgICAgICAgICByYW5kOiByYW5kLFxyXG4gICAgICAgICAgICB0OiB0LFxyXG4gICAgICAgICAgICBsZXZlbDogbGV2ZWwsXHJcbiAgICAgICAgICAgIGVuZDogZW5kLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmRSZXF1ZXN0KG1lc3NhZ2U6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICdUcnlpbmcgdG8gc2VuZCByZXF1ZXN0LCBidXQgbm90IGNvbm5lY3RlZC4gV2FpdGluZy4uLidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5vbk9wZW5cclxuICAgICAgICAgICAgICAgID8ucGlwZSh0YWtlKDEpKVxyXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNvbm5lY3Rpb24kPy5uZXh0KG1lc3NhZ2UpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24kPy5uZXh0KG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUb3BpY3MoXHJcbiAgICAgICAgY2FsbGJhY2s6ICh0b3BpY3M6IHN0cmluZ1tdKSA9PiB2b2lkLFxyXG4gICAgICAgIGZhaWxlZENhbGxiYWNrPzogKGVycm9yOiBhbnkpID0+IHZvaWRcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRvcGljc1NlcnZpY2UgPSBuZXcgUm9zU2VydmljZTxPYmplY3QsIEdldFRvcGljc1NlcnZpY2VSZXNwb25zZT4oe1xyXG4gICAgICAgICAgICByb3M6IHRoaXMsXHJcbiAgICAgICAgICAgIG5hbWU6ICcvcm9zYXBpL3RvcGljcycsXHJcbiAgICAgICAgICAgIHNlcnZpY2VUeXBlOiAncm9zYXBpL1RvcGljcycsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChmYWlsZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0b3BpY3NTZXJ2aWNlLmNhbGwoXHJcbiAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgIChtc2cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtc2cudG9waWNzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWlsZWRDYWxsYmFja1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRvcGljc1NlcnZpY2UuY2FsbCh7fSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobXNnLnRvcGljcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXROb2RlcyhcclxuICAgICAgICBjYWxsYmFjazogKG5vZGVzOiBzdHJpbmdbXSkgPT4gdm9pZCxcclxuICAgICAgICBmYWlsZWRDYWxsYmFjaz86IChlcnJvcjogYW55KSA9PiB2b2lkXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0b3BpY3NTZXJ2aWNlID0gbmV3IFJvc1NlcnZpY2U8T2JqZWN0LCBHZXROb2Rlc1NlcnZpY2VSZXNwb25zZT4oe1xyXG4gICAgICAgICAgICByb3M6IHRoaXMsXHJcbiAgICAgICAgICAgIG5hbWU6ICcvcm9zYXBpL25vZGVzJyxcclxuICAgICAgICAgICAgc2VydmljZVR5cGU6ICdyb3NhcGkvTm9kZXMnLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZmFpbGVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdG9waWNzU2VydmljZS5jYWxsKFxyXG4gICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAobXNnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobXNnLm5vZGVzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWlsZWRDYWxsYmFja1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRvcGljc1NlcnZpY2UuY2FsbCh7fSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobXNnLm5vZGVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgaWRDb3VudGVyOiBudW1iZXIgPSAwO1xyXG5cclxuY2xhc3MgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgb3A6IFJvc2JyaWRnZU9wZXJhdGlvbiB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuY2xhc3MgU2V0U3RhdHVzTGV2ZWwgZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7XHJcbiAgICBwcml2YXRlIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIGxldmVsOiBTdGF0dXNNZXNzYWdlTGV2ZWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGV2ZWw6IFN0YXR1c01lc3NhZ2VMZXZlbCwgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAnc2V0X2xldmVsJztcclxuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTdGF0dXNNZXNzYWdlIGV4dGVuZHMgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBsZXZlbDogU3RhdHVzTWVzc2FnZUxldmVsO1xyXG4gICAgcHJpdmF0ZSBtc2c6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihsZXZlbDogU3RhdHVzTWVzc2FnZUxldmVsLCBtc2c6IHN0cmluZywgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAnc3RhdHVzJztcclxuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMubXNnID0gbXNnO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBdXRoZW50aWNhdGUgZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7XHJcbiAgICBwcml2YXRlIG1hYzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBjbGllbnQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgZGVzdDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByYW5kOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbGV2ZWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgZW5kOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgbWFjOiBzdHJpbmcsXHJcbiAgICAgICAgY2xpZW50OiBzdHJpbmcsXHJcbiAgICAgICAgZGVzdDogc3RyaW5nLFxyXG4gICAgICAgIHJhbmQ6IHN0cmluZyxcclxuICAgICAgICB0OiBudW1iZXIsXHJcbiAgICAgICAgbGV2ZWw6IHN0cmluZyxcclxuICAgICAgICBlbmQ6IG51bWJlclxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9wID0gJ2F1dGgnO1xyXG4gICAgICAgIHRoaXMubWFjID0gbWFjO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIHRoaXMuZGVzdCA9IGRlc3Q7XHJcbiAgICAgICAgdGhpcy5yYW5kID0gcmFuZDtcclxuICAgICAgICB0aGlzLnQgPSB0O1xyXG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcclxuICAgICAgICB0aGlzLmVuZCA9IGVuZDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQWR2ZXJ0aXNlIGV4dGVuZHMgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgdG9waWM6IHN0cmluZztcclxuICAgIHByaXZhdGUgdHlwZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBsYXRjaDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgcXVldWVfc2l6ZTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHRvcGljOiBzdHJpbmcsXHJcbiAgICAgICAgdHlwZTogc3RyaW5nLFxyXG4gICAgICAgIGlkPzogc3RyaW5nLFxyXG4gICAgICAgIGxhdGNoPzogYm9vbGVhbixcclxuICAgICAgICBxdWV1ZV9zaXplPzogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAnYWR2ZXJ0aXNlJztcclxuICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7XHJcbiAgICAgICAgdGhpcy5pZCA9IGBhZHZlcnRpc2U6JHt0aGlzLnRvcGljfTokeysraWRDb3VudGVyfWA7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmxhdGNoID0gbGF0Y2ggPz8gZmFsc2U7XHJcbiAgICAgICAgaWYgKHF1ZXVlX3NpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZV9zaXplID0gTWF0aC5tYXgoMCwgcXVldWVfc2l6ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZV9zaXplID0gMTAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVW5hZHZlcnRpc2UgZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7XHJcbiAgICBwcml2YXRlIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHRvcGljOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IodG9waWM6IHN0cmluZywgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAndW5hZHZlcnRpc2UnO1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFB1Ymxpc2ggZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7XHJcbiAgICBwcml2YXRlIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHRvcGljOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIG1zZzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBsYXRjaDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgcXVldWVfc2l6ZTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHRvcGljOiBzdHJpbmcsXHJcbiAgICAgICAgbXNnOiBhbnksXHJcbiAgICAgICAgaWQ/OiBzdHJpbmcsXHJcbiAgICAgICAgbGF0Y2g/OiBib29sZWFuLFxyXG4gICAgICAgIHF1ZXVlX3NpemU/OiBudW1iZXJcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vcCA9ICdwdWJsaXNoJztcclxuICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7XHJcbiAgICAgICAgdGhpcy5pZCA9IGBwdWJsaXNoOiR7dGhpcy50b3BpY306JHsrK2lkQ291bnRlcn1gO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcclxuICAgICAgICB0aGlzLm1zZyA9IG1zZztcclxuICAgICAgICB0aGlzLmxhdGNoID0gbGF0Y2ggPz8gZmFsc2U7XHJcbiAgICAgICAgaWYgKHF1ZXVlX3NpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZV9zaXplID0gTWF0aC5tYXgoMCwgcXVldWVfc2l6ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZV9zaXplID0gMTAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU3Vic2NyaWJlIGV4dGVuZHMgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgdG9waWM6IHN0cmluZztcclxuICAgIHByaXZhdGUgdHlwZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSB0aHJvdHRsZV9yYXRlOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHF1ZXVlX2xlbmd0aDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBmcmFnbWVudF9zaXplOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIGNvbXByZXNzaW9uOiBSb3NUb3BpY0NvbXByZXNzaW9uIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHRvcGljOiBzdHJpbmcsXHJcbiAgICAgICAgdHlwZT86IHN0cmluZyxcclxuICAgICAgICB0aHJvdHRsZV9yYXRlPzogbnVtYmVyLFxyXG4gICAgICAgIHF1ZXVlX2xlbmd0aD86IG51bWJlcixcclxuICAgICAgICBmcmFnbWVudF9zaXplPzogbnVtYmVyLFxyXG4gICAgICAgIGNvbXByZXNzaW9uPzogUm9zVG9waWNDb21wcmVzc2lvbixcclxuICAgICAgICBpZD86IHN0cmluZ1xyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9wID0gJ3N1YnNjcmliZSc7XHJcbiAgICAgICAgdGhpcy50b3BpYyA9IHRvcGljO1xyXG4gICAgICAgIHRoaXMuaWQgPSBgc3Vic2NyaWJlOiR7dGhpcy50b3BpY306JHsrK2lkQ291bnRlcn1gO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy50aHJvdHRsZV9yYXRlID0gdGhyb3R0bGVfcmF0ZSA/PyAwO1xyXG4gICAgICAgIHRoaXMucXVldWVfbGVuZ3RoID0gcXVldWVfbGVuZ3RoID8/IDA7XHJcbiAgICAgICAgdGhpcy5mcmFnbWVudF9zaXplID0gZnJhZ21lbnRfc2l6ZTtcclxuICAgICAgICB0aGlzLmNvbXByZXNzaW9uID0gY29tcHJlc3Npb24gPz8gJ25vbmUnO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTZXJ2aWNlQ2FsbCBleHRlbmRzIFJvc2JyaWRnZVByb3RvY29sIHtcclxuICAgIGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHNlcnZpY2U6IHN0cmluZztcclxuICAgIHByaXZhdGUgYXJnczogT2JqZWN0IHwgdW5kZWZpbmVkID0ge307XHJcbiAgICBwcml2YXRlIGZyYWdtZW50X3NpemU6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgY29tcHJlc3Npb246ICdub25lJyB8ICdwbmcnIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHNlcnZpY2U6IHN0cmluZyxcclxuICAgICAgICBhcmdzPzogYW55LFxyXG4gICAgICAgIGlkPzogc3RyaW5nLFxyXG4gICAgICAgIGZyYWdtZW50X3NpemU/OiBudW1iZXIsXHJcbiAgICAgICAgY29tcHJlc3Npb24/OiAnbm9uZScgfCAncG5nJ1xyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9wID0gJ2NhbGxfc2VydmljZSc7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLmlkID0gaWQgPz8gYGNhbGxfc2VydmljZToke3RoaXMuc2VydmljZX06JHsrK2lkQ291bnRlcn1gO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcclxuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzID8/IHt9O1xyXG4gICAgICAgIHRoaXMuZnJhZ21lbnRfc2l6ZSA9IGZyYWdtZW50X3NpemU7XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc2lvbiA9IGNvbXByZXNzaW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBZHZlcnRpc2VTZXJ2aWNlIGV4dGVuZHMgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgcHJpdmF0ZSB0eXBlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHNlcnZpY2U6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIHNlcnZpY2U6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vcCA9ICdhZHZlcnRpc2Vfc2VydmljZSc7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBVbmFkdmVydGlzZVNlcnZpY2UgZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7XHJcbiAgICBwcml2YXRlIHNlcnZpY2U6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAndW5hZHZlcnRpc2Vfc2VydmljZSc7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgU2VydmljZVJlcXVlc3QgZXh0ZW5kcyBSb3NicmlkZ2VQcm90b2NvbCB7fVxyXG5cclxuY2xhc3MgU2VydmljZVJlc3BvbnNlIGV4dGVuZHMgUm9zYnJpZGdlUHJvdG9jb2wge1xyXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBzZXJ2aWNlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHZhbHVlczogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSByZXN1bHQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZTogc3RyaW5nLCByZXN1bHQ6IGJvb2xlYW4sIHZhbHVlcz86IGFueSwgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3AgPSAnc2VydmljZV9yZXNwb25zZSc7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxyXG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzID8/IHt9O1xyXG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBVbnN1YnNjcmliZSBleHRlbmRzIFJvc2JyaWRnZVByb3RvY29sIHtcclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgdG9waWM6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0b3BpYzogc3RyaW5nLCBpZD86IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vcCA9ICd1bnN1YnNjcmliZSc7XHJcbiAgICAgICAgdGhpcy50b3BpYyA9IHRvcGljO1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFJvc1RvcGljUGFyYW0ge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZVR5cGU6IHN0cmluZztcclxuICAgIGNvbXByZXNzaW9uPzogUm9zVG9waWNDb21wcmVzc2lvbjtcclxuICAgIHRocm90dGxlUmF0ZT86IG51bWJlcjtcclxuICAgIGxhdGNoPzogYm9vbGVhbjtcclxuICAgIHF1ZXVlU2l6ZT86IG51bWJlcjtcclxuICAgIHF1ZXVlTGVuZ3RoPzogbnVtYmVyO1xyXG4gICAgcmVjb25uZWN0T25DbG9zZT86IGJvb2xlYW47XHJcbiAgICByb3M6IFJvc2JyaWRnZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJvc1RvcGljIGNsYXNzIHVzZWQgdG8gaW5zdGFudGlhdGUgYSB0b3BpYywgc3Vic2NyaWJlIHRvIGl0cyBldmVudCBhbmQgYWR2ZXJ0aXNlIGZ1dHVyZSBldmVudHMgcmVnYXJkaW5nIHRoZSB0b3BpY1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJvc1RvcGljPFQgZXh0ZW5kcyB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmcgfT5cclxuICAgIGltcGxlbWVudHMgUm9zVG9waWNQYXJhbVxyXG57XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBtZXNzYWdlVHlwZTogc3RyaW5nO1xyXG4gICAgY29tcHJlc3Npb24/OiBSb3NUb3BpY0NvbXByZXNzaW9uO1xyXG4gICAgdGhyb3R0bGVSYXRlPzogbnVtYmVyO1xyXG4gICAgbGF0Y2g/OiBib29sZWFuO1xyXG4gICAgcXVldWVTaXplPzogbnVtYmVyO1xyXG4gICAgcXVldWVMZW5ndGg/OiBudW1iZXI7XHJcbiAgICByZWNvbm5lY3RPbkNsb3NlPzogYm9vbGVhbjtcclxuICAgIHJvczogUm9zYnJpZGdlO1xyXG4gICAgcHJpdmF0ZSBvYnNlcnZhYmxlJDogT2JzZXJ2YWJsZTxUPiB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgc3ViOiBTdWJzY3JpcHRpb24gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioe1xyXG4gICAgICAgIHJvcyxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIG1lc3NhZ2VUeXBlLFxyXG4gICAgICAgIGNvbXByZXNzaW9uID0gJ25vbmUnLFxyXG4gICAgICAgIHRocm90dGxlUmF0ZSA9IDAsXHJcbiAgICAgICAgbGF0Y2ggPSBmYWxzZSxcclxuICAgICAgICBxdWV1ZVNpemUgPSAxMDAsXHJcbiAgICAgICAgcXVldWVMZW5ndGggPSAwLFxyXG4gICAgICAgIHJlY29ubmVjdE9uQ2xvc2UgPSB0cnVlLFxyXG4gICAgfTogUm9zVG9waWNQYXJhbSkge1xyXG4gICAgICAgIHRoaXMucm9zID0gcm9zO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xyXG4gICAgICAgIHRoaXMuY29tcHJlc3Npb24gPSBjb21wcmVzc2lvbjtcclxuICAgICAgICB0aGlzLnRocm90dGxlUmF0ZSA9IHRocm90dGxlUmF0ZTtcclxuICAgICAgICB0aGlzLmxhdGNoID0gbGF0Y2g7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNpemUgPSBxdWV1ZVNpemU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUxlbmd0aCA9IHF1ZXVlTGVuZ3RoO1xyXG4gICAgICAgIHRoaXMucmVjb25uZWN0T25DbG9zZSA9IHJlY29ubmVjdE9uQ2xvc2U7XHJcblxyXG4gICAgICAgIHRoaXMudGhyb3R0bGVSYXRlID0gTWF0aC5tYXgodGhpcy50aHJvdHRsZVJhdGUsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZShjYWxsYmFjazogKG1lc3NhZ2U6IFQpID0+IHZvaWQpIHtcclxuICAgICAgICBjb25zdCBzdWJSZXF1ZXN0ID0gbmV3IFN1YnNjcmliZSh0aGlzLm5hbWUsIHRoaXMubWVzc2FnZVR5cGUpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSQgPSB0aGlzLnJvcy5jb25uZWN0aW9uJD8ucGlwZShcclxuICAgICAgICAgICAgZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgKGRhdGEpID0+IGRhdGE/LnRvcGljID09PSB0aGlzLm5hbWUgJiYgZGF0YT8ub3AgPT09ICdwdWJsaXNoJyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBwbHVjaygnbXNnJylcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc3ViID0gdGhpcy5vYnNlcnZhYmxlJD8uc3Vic2NyaWJlKChtZXNzYWdlOiBUKSA9PlxyXG4gICAgICAgICAgICBjYWxsYmFjayhtZXNzYWdlKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5pZCA9IHN1YlJlcXVlc3QuaWQ7XHJcbiAgICAgICAgdGhpcy5yb3Muc2VuZFJlcXVlc3Qoc3ViUmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5zdWJzY3JpYmUoKSB7XHJcbiAgICAgICAgY29uc3QgdW5zdWJSZXF1ZXN0ID0gbmV3IFVuc3Vic2NyaWJlKHRoaXMubmFtZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgdGhpcy5yb3Muc2VuZFJlcXVlc3QodW5zdWJSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLnN1Yj8udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZHZlcnRpc2UoKSB7XHJcbiAgICAgICAgY29uc3QgYWR2ZXJ0aXNlUmVxdWVzdCA9IG5ldyBBZHZlcnRpc2UoXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSxcclxuICAgICAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgdGhpcy5sYXRjaCxcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZVNpemVcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaWQgPSBhZHZlcnRpc2VSZXF1ZXN0LmlkO1xyXG4gICAgICAgIHRoaXMucm9zLnNlbmRSZXF1ZXN0KGFkdmVydGlzZVJlcXVlc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1Ymxpc2gobXNnOiBUKSB7XHJcbiAgICAgICAgY29uc3QgcHVibGlzaFJlcXVlc3QgPSBuZXcgUHVibGlzaChcclxuICAgICAgICAgICAgdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBtc2csXHJcbiAgICAgICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgIHRoaXMubGF0Y2gsXHJcbiAgICAgICAgICAgIHRoaXMucXVldWVTaXplXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnJvcy5zZW5kUmVxdWVzdChwdWJsaXNoUmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5hZHZlcnRpc2UoKSB7XHJcbiAgICAgICAgY29uc3QgdW5hZHZlcnRpc2VSZXF1ZXN0ID0gbmV3IFVuYWR2ZXJ0aXNlKHRoaXMubmFtZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgdGhpcy5yb3Muc2VuZFJlcXVlc3QodW5hZHZlcnRpc2VSZXF1ZXN0KTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFJvc1NlcnZpY2VQYXJhbXMge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgc2VydmljZVR5cGU6IHN0cmluZztcclxuICAgIHJvczogUm9zYnJpZGdlO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUm9zUGFyYW1QYXJhbXMge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcm9zOiBSb3NicmlkZ2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSb3NTZXJ2aWNlPFxyXG4gICAgVF9SRVEgZXh0ZW5kcyB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmcgfSxcclxuICAgIFRfUkVTIGV4dGVuZHMgeyB0b1N0cmluZzogKCkgPT4gc3RyaW5nIH1cclxuPiBpbXBsZW1lbnRzIFJvc1NlcnZpY2VQYXJhbXNcclxue1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcm9zOiBSb3NicmlkZ2U7XHJcbiAgICBzZXJ2aWNlVHlwZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBpZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSBpc0FkdmVydGlzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7IHJvcywgbmFtZSwgc2VydmljZVR5cGUgfTogUm9zU2VydmljZVBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucm9zID0gcm9zO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlVHlwZSA9IHNlcnZpY2VUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGFkdmVydGlzZShjYWxsYmFjazogKHJlcTogVF9SRVEpID0+IFRfUkVTKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZUFkdmVydGlzZVJlcXVlc3QgPSBuZXcgQWR2ZXJ0aXNlU2VydmljZShcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlVHlwZSxcclxuICAgICAgICAgICAgdGhpcy5uYW1lXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnJvcy5jb25uZWN0aW9uJFxyXG4gICAgICAgICAgICA/LnBpcGUoXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgKGRhdGEpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE/LnNlcnZpY2UgPT09IHRoaXMubmFtZSAmJiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhPy5vcCA9PT0gJ2NhbGxfc2VydmljZScgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XHJcbiAgICAgICAgICAgICAgICBtYXAoKHsgYXJncywgaWQgfSkgPT4gKHsgYXJncywgaWQgfSkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgocmVxOiB7IGFyZ3M6IFRfUkVROyBpZD86IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBjYWxsYmFjayhyZXEuYXJncyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlUmVzcG9uc2UgPSBuZXcgU2VydmljZVJlc3BvbnNlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcclxuICAgICAgICAgICAgICAgICAgICByZXEuaWQgPz8gJydcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvcy5zZW5kUmVxdWVzdChzZXJ2aWNlUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yb3Muc2VuZFJlcXVlc3Qoc2VydmljZUFkdmVydGlzZVJlcXVlc3QpO1xyXG4gICAgICAgIHRoaXMuaXNBZHZlcnRpc2VkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsKFxyXG4gICAgICAgIHJlcTogVF9SRVEsXHJcbiAgICAgICAgY2FsbGJhY2s6IChyZXM6IFRfUkVTKSA9PiB2b2lkLFxyXG4gICAgICAgIGZhaWxlZENhbGxiYWNrPzogKHJlczogYW55KSA9PiB2b2lkXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlQ2FsbFJlcXVlc3QgPSBuZXcgU2VydmljZUNhbGwodGhpcy5uYW1lLCByZXEpO1xyXG4gICAgICAgIHRoaXMucm9zLmNvbm5lY3Rpb24kXHJcbiAgICAgICAgICAgID8ucGlwZShcclxuICAgICAgICAgICAgICAgIGZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAoZGF0YSkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT8uc2VydmljZSA9PT0gdGhpcy5uYW1lICYmIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE/LmlkID09PSBzZXJ2aWNlQ2FsbFJlcXVlc3QuaWQgJiYgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT8ub3AgPT09ICdzZXJ2aWNlX3Jlc3BvbnNlJyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHRhcCgobXNnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtc2c/LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIG1zZz8ucmVzdWx0ID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWxlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRDYWxsYmFjayhtc2cudmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIoKGRhdGEpID0+IGRhdGE/LnJlc3VsdCAhPT0gZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgcGx1Y2soJ3ZhbHVlcycpLFxyXG4gICAgICAgICAgICAgICAgdGFrZSgxKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKG1lc3NhZ2U6IFRfUkVTKSA9PiBjYWxsYmFjayhtZXNzYWdlKSk7XHJcbiAgICAgICAgdGhpcy5yb3Muc2VuZFJlcXVlc3Qoc2VydmljZUNhbGxSZXF1ZXN0KTtcclxuICAgIH1cclxuXHJcbiAgICB1bmFkdmVydGlzZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBZHZlcnRpc2VkKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2VydmljZVVuYWR2ZXJ0aXNlUmVxdWVzdCA9IG5ldyBVbmFkdmVydGlzZVNlcnZpY2UodGhpcy5uYW1lKTtcclxuICAgICAgICB0aGlzLnJvcy5zZW5kUmVxdWVzdChzZXJ2aWNlVW5hZHZlcnRpc2VSZXF1ZXN0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJvc1BhcmFtPFQgZXh0ZW5kcyB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmcgfT5cclxuICAgIGltcGxlbWVudHMgUm9zUGFyYW1QYXJhbXNcclxue1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcm9zOiBSb3NicmlkZ2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyByb3MsIG5hbWUgfTogUm9zUGFyYW1QYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnJvcyA9IHJvcztcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldChjYWxsYmFjazogKHJlczogVCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtU2VydmljZSA9IG5ldyBSb3NTZXJ2aWNlPHsgbmFtZTogc3RyaW5nIH0sIHsgdmFsdWU6IFQgfT4oe1xyXG4gICAgICAgICAgICByb3M6IHRoaXMucm9zLFxyXG4gICAgICAgICAgICBuYW1lOiAnL3Jvc2FwaS9nZXRfcGFyYW0nLFxyXG4gICAgICAgICAgICBzZXJ2aWNlVHlwZTogJ3Jvc2FwaS9HZXRQYXJhbScsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGFyYW1TZXJ2aWNlLmNhbGwoeyBuYW1lOiB0aGlzLm5hbWUgfSwgKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKEpTT04ucGFyc2UocmVzLnZhbHVlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KG5ld1ZhbHVlOiBULCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtU2VydmljZSA9IG5ldyBSb3NTZXJ2aWNlPFxyXG4gICAgICAgICAgICB7IG5hbWU6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9LFxyXG4gICAgICAgICAgICB7fVxyXG4gICAgICAgID4oe1xyXG4gICAgICAgICAgICByb3M6IHRoaXMucm9zLFxyXG4gICAgICAgICAgICBuYW1lOiAnL3Jvc2FwaS9zZXRfcGFyYW0nLFxyXG4gICAgICAgICAgICBzZXJ2aWNlVHlwZTogJ3Jvc2FwaS9TZXRQYXJhbScsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGFyYW1TZXJ2aWNlLmNhbGwoXHJcbiAgICAgICAgICAgIHsgbmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpIH0sXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZShjYWxsYmFjazogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IHBhcmFtU2VydmljZSA9IG5ldyBSb3NTZXJ2aWNlPHsgbmFtZTogc3RyaW5nIH0sIHt9Pih7XHJcbiAgICAgICAgICAgIHJvczogdGhpcy5yb3MsXHJcbiAgICAgICAgICAgIG5hbWU6ICcvcm9zYXBpL2RlbGV0ZV9wYXJhbScsXHJcbiAgICAgICAgICAgIHNlcnZpY2VUeXBlOiAncm9zYXBpL0RlbGV0ZVBhcmFtJyxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFyYW1TZXJ2aWNlLmNhbGwoeyBuYW1lOiB0aGlzLm5hbWUgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG50eXBlIFN0YXR1c01lc3NhZ2VMZXZlbCA9ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnbm9uZSc7XHJcblxyXG50eXBlIFJvc2JyaWRnZU9wZXJhdGlvbiA9XHJcbiAgICB8ICdmcmFnbWVudCdcclxuICAgIHwgJ3BuZydcclxuICAgIHwgJ3NldF9sZXZlbCdcclxuICAgIHwgJ3N0YXR1cydcclxuICAgIHwgJ2F1dGgnXHJcbiAgICB8ICdhZHZlcnRpc2UnXHJcbiAgICB8ICd1bmFkdmVydGlzZSdcclxuICAgIHwgJ3N1YnNjcmliZSdcclxuICAgIHwgJ3Vuc3Vic2NyaWJlJ1xyXG4gICAgfCAnY2FsbF9zZXJ2aWNlJ1xyXG4gICAgfCAnYWR2ZXJ0aXNlX3NlcnZpY2UnXHJcbiAgICB8ICd1bmFkdmVydGlzZV9zZXJ2aWNlJ1xyXG4gICAgfCAnc2VydmljZV9yZXF1ZXN0J1xyXG4gICAgfCAnc2VydmljZV9yZXNwb25zZSdcclxuICAgIHwgJ3B1Ymxpc2gnO1xyXG5cclxudHlwZSBSb3NMaWJUcmFuc3BvcnRMaWJyYXJ5ID1cclxuICAgIHwgJ3dlYnNvY2tldCdcclxuICAgIHwgJ3NvY2tldC5pbydcclxuICAgIHwgJ1JUQ1BlZXJDb25uZWN0aW9uJ1xyXG4gICAgfCAnd29ya2VyU29ja2V0JztcclxuXHJcbnR5cGUgUm9zVG9waWNDb21wcmVzc2lvbiA9ICdwbmcnIHwgJ2Nib3InIHwgJ2Nib3ItcmF3JyB8ICdub25lJztcclxuIl19